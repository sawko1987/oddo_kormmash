# Настройка отчетности и дашбордов для закупок

## Доступные отчеты

### 1. Purchase Analysis (Анализ закупок)

**Расположение:** Purchase → Reporting → Purchase Analysis

**Возможности:**
- Анализ закупок по периодам
- Группировка по поставщикам, продуктам, категориям
- Сравнение закупок по периодам
- Анализ сумм и количеств

**Использование:**
1. Перейдите в **Purchase → Reporting → Purchase Analysis**
2. Используйте фильтры:
   - По дате (Date Order)
   - По поставщику (Partner)
   - По продукту (Product)
   - По категории (Category)
   - По статусу (State)
3. Просматривайте в различных представлениях:
   - **List**: таблица с деталями
   - **Pivot**: сводная таблица
   - **Graph**: графики

**Примеры анализа:**
- Закупки по месяцам
- Топ поставщиков по сумме
- Закупки по категориям продуктов
- Сравнение периодов

### 2. Vendor Delay Report (Отчет о задержках поставок)

**Расположение:** Purchase → Reporting → Vendor Delay Report

**Возможности:**
- Анализ задержек поставок
- Сравнение обещанных и фактических дат поставки
- Рейтинг поставщиков по срокам
- Выявление проблемных поставок

**Использование:**
1. Перейдите в **Purchase → Reporting → Vendor Delay Report**
2. Фильтруйте по:
   - Поставщику
   - Периоду
   - Статусу заказа
3. Анализируйте:
   - Средние задержки по поставщикам
   - Критичные задержки
   - Тренды по срокам поставки

### 3. Purchase Order Report (Отчет по заказам)

**Расположение:** Purchase → Purchase Orders → Print → Purchase Order

**Возможности:**
- Печать заказов на закупку
- Экспорт в PDF
- Отправка по email

### 4. Purchase Requisition Report (Отчет по соглашениям)

**Расположение:** Purchase → Purchase Agreements → [Agreement] → Print

**Возможности:**
- Отчет по рамочным соглашениям
- Использованные объемы
- Остатки по соглашениям

## Настройка дашбордов

### Создание кастомного дашборда

1. Перейдите в **Purchase → Dashboard**
2. Используйте виджеты:
   - **Purchase Orders**: список текущих заказов
   - **To Approve**: заказы на утверждение
   - **Vendor Bills**: счета поставщиков
   - **Purchase Analysis**: графики анализа

3. Настройте фильтры для каждого виджета
4. Сохраните дашборд

### Рекомендуемые виджеты для снабженца

1. **Заказы на утверждение**
   - Фильтр: State = "to approve"
   - Показывает заказы, требующие утверждения

2. **Задержки поставок**
   - Фильтр: Scheduled Date < Today, State = "purchase"
   - Показывает заказы с просроченными поставками

3. **Анализ по поставщикам**
   - График: закупки по поставщикам за период
   - Помогает оценить объемы закупок

4. **Критичные заказы**
   - Фильтр: Priority = "1" или "Urgent"
   - Показывает срочные заказы

## Экспорт данных

### Экспорт в Excel/CSV

1. В любом списке (Purchase Orders, Vendors, Products)
2. Нажмите **Action → Export**
3. Выберите поля для экспорта
4. Экспортируйте в нужный формат

### Автоматический экспорт

Настройте автоматические отчеты через:
1. **Settings → Technical → Automation → Scheduled Actions**
2. Создайте действие для регулярного экспорта
3. Настройте расписание (ежедневно, еженедельно)

## Кастомные отчеты

### Создание через Studio

1. Установите модуль **Studio** (если не установлен)
2. Перейдите в **Purchase → Purchase Orders**
3. Нажмите **Edit** (в режиме разработчика)
4. Создайте кастомные представления и отчеты

### Программное создание отчетов

Пример создания кастомного отчета через код:

```python
from odoo import models, fields, api

class CustomPurchaseReport(models.TransientModel):
    _name = 'custom.purchase.report'
    _description = 'Custom Purchase Report'

    def generate_report(self):
        # Логика генерации отчета
        orders = self.env['purchase.order'].search([
            ('state', '=', 'purchase'),
            ('date_planned', '<', fields.Date.today())
        ])
        # Обработка данных и генерация отчета
        return orders
```

## Рекомендуемые отчеты для машиностроения

### Еженедельный отчет по закупкам

**Содержание:**
- Новые заказы за неделю
- Заказы на утверждение
- Задержки поставок
- Критичные заказы

**Настройка:**
1. Создайте сохраненный поиск с нужными фильтрами
2. Настройте автоматическую отправку по email
3. Расписание: каждую пятницу

### Месячный анализ поставщиков

**Содержание:**
- Объемы закупок по поставщикам
- Средние сроки поставки
- Качество поставок
- Рейтинг поставщиков

**Настройка:**
1. Используйте отчет **Purchase Analysis**
2. Группируйте по поставщикам
3. Экспортируйте в Excel для детального анализа

### Отчет по критичным материалам

**Содержание:**
- Материалы с низким остатком
- Заказы на критичные материалы
- Прогноз потребности

**Настройка:**
1. Используйте **Inventory → Reporting → Forecast Report**
2. Фильтруйте по критичным продуктам
3. Мониторьте регулярно

## Интеграция с другими модулями

### Отчеты по производству

Если используется MRP:
- **Manufacturing → Reporting → Manufacturing Orders**
- Связь закупок с производственными заказами
- Анализ потребности в материалах

### Финансовые отчеты

Интеграция с Accounting:
- **Accounting → Reporting → Vendor Bills**
- Анализ оплат поставщикам
- Контроль бюджетов закупок

## Автоматизация отчетов

### Настройка автоматической отправки

1. Перейдите в **Settings → Technical → Automation → Scheduled Actions**
2. Создайте новое действие:
   - **Model**: purchase.order
   - **Trigger**: по расписанию
   - **Code**: логика генерации и отправки отчета
3. Настройте расписание

### Email-уведомления

Настройте автоматические email-уведомления:
1. **Settings → Technical → Email → Mail Templates**
2. Создайте шаблон отчета
3. Настройте автоматическую отправку

## Рекомендации

1. **Регулярно просматривайте отчеты** для контроля закупок
2. **Настройте дашборды** для быстрого доступа к ключевой информации
3. **Используйте фильтры** для фокусировки на важных данных
4. **Экспортируйте данные** для детального анализа в Excel
5. **Автоматизируйте регулярные отчеты** для экономии времени
