# Настройка тендеров и рамочных соглашений (Purchase Requisition)

## Обзор

Модуль `purchase_requisition` позволяет:
- Проводить тендеры с несколькими поставщиками
- Создавать рамочные соглашения (Blanket Orders)
- Использовать шаблоны закупок (Purchase Templates)
- Сравнивать предложения поставщиков

## Активация модуля

1. Перейдите в **Settings → Purchase**
2. Найдите раздел **Purchase Agreements**
3. Включите опцию **Purchase Agreements**
4. Сохраните настройки

## Типы соглашений

### 1. Blanket Order (Рамочное соглашение)

Долгосрочное соглашение с фиксированными ценами на период.

**Применение:**
- Регулярные закупки одних и тех же материалов
- Согласованные цены на период (например, год)
- Гарантированные объемы для поставщика

**Создание:**

1. Перейдите в **Purchase → Purchase Agreements**
2. Нажмите **Create**
3. Заполните:
   - **Agreement Type**: Blanket Order
   - **Vendor**: выберите поставщика
   - **Start Date**: дата начала действия
   - **End Date**: дата окончания
   - **Products**: добавьте продукты с ценами
4. Сохраните и активируйте

**Использование:**

При создании заказа на закупку:
1. Выберите поставщика с активным рамочным соглашением
2. Система автоматически предложит цены из соглашения
3. Заказ будет связан с соглашением

### 2. Purchase Template (Шаблон закупки)

Шаблон для повторяющихся закупок.

**Применение:**
- Стандартные закупки с одинаковым набором продуктов
- Быстрое создание заказов по шаблону
- Единообразие условий закупки

**Создание:**

1. Перейдите в **Purchase → Purchase Agreements**
2. Нажмите **Create**
3. Заполните:
   - **Agreement Type**: Purchase Template
   - **Products**: добавьте продукты (цены не обязательны)
   - **Description**: описание шаблона
4. Сохраните

**Использование:**

1. При создании заказа на закупку выберите шаблон
2. Система добавит продукты из шаблона
3. Заполните недостающие данные (поставщик, цены)

## Проведение тендеров

### Шаг 1: Создание тендера

1. Перейдите в **Purchase → Purchase Agreements**
2. Создайте новое соглашение типа **Blanket Order**
3. Добавьте продукты и требуемые количества
4. **НЕ указывайте поставщика** на этом этапе

### Шаг 2: Отправка запросов предложений (RFQ)

1. В соглашении нажмите **Send RFQ**
2. Выберите несколько поставщиков
3. Система создаст запросы предложений для каждого поставщика
4. Отправьте RFQ поставщикам

### Шаг 3: Получение предложений

1. Поставщики получают RFQ и могут ответить через портал
2. Или вы можете вручную ввести предложения:
   - Откройте RFQ от поставщика
   - Заполните цены и условия
   - Подтвердите предложение

### Шаг 4: Сравнение предложений

1. В соглашении перейдите на вкладку **Purchase Orders**
2. Просмотрите все предложения от разных поставщиков
3. Сравните:
   - Цены
   - Сроки поставки
   - Условия оплаты
   - Дополнительные условия

### Шаг 5: Выбор лучшего предложения

1. Выберите лучшее предложение
2. Нажмите **Create Purchase Order**
3. Система создаст заказ на закупку из выбранного предложения
4. Завершите процесс закупки как обычно

## Примеры использования

### Пример 1: Годовая закупка металла

**Сценарий:** Ежегодная закупка металлопроката с фиксированными ценами

**Настройка:**
1. Создайте Blanket Order на год
2. Укажите поставщика
3. Добавьте продукты:
   - Лист стальной: 1000 кг по цене X
   - Пруток: 500 кг по цене Y
4. Активируйте соглашение

**Использование:**
- При создании заказов на металл система использует цены из соглашения
- Можно отслеживать использованные объемы
- В конце года можно продлить или создать новое соглашение

### Пример 2: Тендер на закупку оборудования

**Сценарий:** Закупка нового оборудования, требуется выбрать лучшего поставщика

**Настройка:**
1. Создайте Blanket Order без поставщика
2. Добавьте оборудование с требуемыми характеристиками
3. Отправьте RFQ 5 поставщикам
4. Получите предложения
5. Сравните предложения
6. Выберите лучшее и создайте заказ

### Пример 3: Стандартная закупка комплектующих

**Сценарий:** Регулярная закупка стандартного набора комплектующих

**Настройка:**
1. Создайте Purchase Template
2. Добавьте стандартный набор продуктов:
   - Болты М8: 1000 шт
   - Гайки М8: 1000 шт
   - Шайбы М8: 2000 шт
3. Сохраните шаблон

**Использование:**
- При создании заказа выберите шаблон
- Система добавит все продукты
- Укажите поставщика и цены
- Быстро создайте заказ

## Мониторинг и отчеты

### Отчеты по соглашениям

1. **Purchase → Reporting → Purchase Agreements**
   - Список всех соглашений
   - Статусы соглашений
   - Использованные объемы

2. **Purchase → Purchase Agreements → [Agreement] → Purchase Orders**
   - Все заказы, созданные из соглашения
   - Объемы и суммы

### Анализ тендеров

1. Сравнение предложений в одном соглашении
2. Анализ экономии при выборе лучшего предложения
3. Отслеживание истории тендеров

## Рекомендации

1. **Используйте Blanket Orders** для регулярных закупок с известными поставщиками
2. **Проводите тендеры** для крупных закупок или новых поставщиков
3. **Создавайте шаблоны** для стандартных наборов продуктов
4. **Регулярно обновляйте соглашения** при изменении цен или условий
5. **Отслеживайте использование** соглашений для планирования

## Автоматизация

### Автоматическое использование соглашений

При создании заказа на закупку:
1. Система автоматически ищет активные соглашения для выбранного поставщика
2. Предлагает использовать цены из соглашения
3. Связывает заказ с соглашением

### Напоминания о сроках действия

1. Настройте автоматические напоминания о приближении даты окончания соглашения
2. Регулярно проверяйте активные соглашения
3. Продлевайте или создавайте новые соглашения заранее
