# Руководство по настройке Odoo для снабженца машиностроительного предприятия

## Содержание
1. [Проверка установленных модулей](#1-проверка-установленных-модулей)
2. [Настройка базовых параметров закупок](#2-настройка-базовых-параметров-закупок)
3. [Настройка модуля Purchase Requisition](#3-настройка-модуля-purchase-requisition)
4. [Настройка правил автоматической закупки](#4-настройка-правил-автоматической-закупки)
5. [Управление поставщиками](#5-управление-поставщиками)
6. [Настройка отслеживания материалов](#6-настройка-отслеживания-материалов)
7. [Интеграция с производством (MRP)](#7-интеграция-с-производством-mrp)
8. [Настройка отчетности](#8-настройка-отчетности)

---

## 1. Проверка установленных модулей

### Автоматическая проверка

Запустите скрипт проверки:
```bash
cd "/home/sawko1987/ Odoo"
python3 check_installed_modules.py
```

Скрипт проверит наличие следующих модулей:
- `purchase` - модуль закупок
- `purchase_stock` - интеграция закупок со складом
- `purchase_requisition` - тендеры и соглашения
- `stock` - складской учет
- `mrp` - производство (опционально)

### Ручная проверка через интерфейс Odoo

1. Войдите в Odoo как администратор
2. Перейдите в **Apps** (Приложения)
3. Убедитесь, что установлены модули:
   - Purchase
   - Purchase Stock (устанавливается автоматически)
   - Purchase Agreements (Purchase Requisition)
   - Inventory (Stock)
   - Manufacturing (MRP) - если используется производство

### Установка недостающих модулей

Если модули не установлены:

1. В **Apps** найдите нужный модуль
2. Нажмите **Install**
3. Дождитесь завершения установки

Или через командную строку:
```bash
./odoo-bin -d odoo -u purchase,purchase_stock,purchase_requisition
```

---

## 2. Настройка базовых параметров закупок

### Через интерфейс Odoo

1. Перейдите в **Settings → Purchase**
2. Настройте следующие параметры:

#### 2.1. Двухэтапное утверждение заказов

- **Purchase Order Approval**: Включить
- **Minimum Amount**: 50000 (или другая сумма по вашему усмотрению)

Это означает, что заказы на сумму выше указанной требуют утверждения менеджера.

#### 2.2. Блокировка подтвержденных заказов

- **Lock Confirmed Orders**: Включить

Предотвращает изменение заказов после их подтверждения.

#### 2.3. Предупреждения

- **Warnings**: Включить

Показывает предупреждения о проблемах с продуктами или поставщиками.

#### 2.4. Напоминания о поставках

- **Receipt Reminder**: Включить

Автоматически отправляет напоминания поставщикам о сроках поставки.

### Автоматическая настройка

Запустите скрипт настройки (перед запуском измените username и password):
```bash
python3 setup_purchase_config.py
```

---

## 3. Настройка модуля Purchase Requisition

### Активация модуля

1. Перейдите в **Settings → Purchase**
2. Найдите раздел **Purchase Agreements**
3. Включите опцию **Purchase Agreements**
4. Сохраните настройки

### Типы соглашений

#### Blanket Orders (Рамочные соглашения)

Используются для долгосрочных соглашений с фиксированными ценами:

1. Перейдите в **Purchase → Purchase Agreements**
2. Создайте новое соглашение
3. Выберите тип: **Blanket Order**
4. Укажите:
   - Поставщика
   - Период действия (Start Date, End Date)
   - Продукты и цены
5. Сохраните и активируйте

#### Purchase Templates (Шаблоны закупок)

Используются для повторяющихся закупок:

1. Создайте соглашение типа **Purchase Template**
2. Добавьте продукты и условия
3. Используйте шаблон при создании новых заказов

#### Tenders (Тендеры)

Для проведения тендеров:

1. Создайте соглашение типа **Blanket Order**
2. Отправьте запросы предложений (RFQ) нескольким поставщикам
3. Сравните предложения
4. Выберите лучшее предложение
5. Создайте заказ на закупку из выбранного предложения

---

## 4. Настройка правил автоматической закупки

### 4.1. Настройка точек заказа (Reorder Points)

Точки заказа определяют минимальный уровень запасов, при достижении которого создается заказ на закупку.

#### Для стандартных материалов (автоматическая закупка):

1. Перейдите в **Inventory → Configuration → Reordering Rules**
2. Создайте новое правило:
   - **Product**: выберите продукт
   - **Min Quantity**: минимальный уровень запаса (например, 100)
   - **Max Quantity**: максимальный уровень запаса (например, 500)
   - **Route**: выберите маршрут "Buy" (Закупка)
   - **Trigger**: Auto (автоматически)
3. Сохраните

#### Для специфических комплектующих (ручное подтверждение):

1. Создайте правило аналогично выше
2. **Trigger**: Manual (ручное)
3. Система будет создавать предложения закупки, которые нужно подтверждать вручную

### 4.2. Настройка маршрутов закупок

1. Перейдите в **Inventory → Configuration → Routes**
2. Убедитесь, что маршрут **Buy** активен
3. Проверьте правила маршрута:
   - Должно быть правило типа "Buy"
   - Источник: Vendors (Поставщики)
   - Назначение: Склад

### 4.3. Настройка на уровне продукта

Для каждого продукта можно указать предпочтительный маршрут:

1. Откройте карточку продукта
2. Перейдите на вкладку **Inventory**
3. В разделе **Routes**:
   - Включите маршрут **Buy** для продуктов, которые закупаются
   - Отключите маршрут **Manufacture** для закупаемых продуктов

---

## 5. Управление поставщиками

### 5.1. Создание поставщиков

1. Перейдите в **Purchase → Vendors**
2. Нажмите **Create**
3. Заполните информацию:
   - **Name**: название компании
   - **Contact Name**: контактное лицо
   - **Email**: email для коммуникации
   - **Phone**: телефон
   - **Address**: адрес
   - **Currency**: валюта расчетов
   - **Payment Terms**: условия оплаты

### 5.2. Настройка прайс-листов поставщиков

1. Откройте карточку поставщика
2. Перейдите на вкладку **Purchase**
3. В разделе **Pricelist**:
   - Выберите или создайте прайс-лист
   - Настройте цены с учетом:
     - Объемных скидок
     - Специальных условий контрактов
     - Промо-акций

### 5.3. Импорт прайс-листов

Для массового импорта прайс-листов:

1. Перейдите в **Purchase → Products → Pricelists**
2. Выберите прайс-лист поставщика
3. Используйте функцию **Import** для загрузки из CSV/Excel

### 5.4. Настройка условий доставки

В карточке поставщика:
- **Delivery Method**: выберите способ доставки
- **Delivery Lead Time**: укажите срок поставки (в днях)

---

## 6. Настройка отслеживания материалов

### 6.1. Отслеживание по серийным номерам

Для критичных комплектующих:

1. Откройте карточку продукта
2. Перейдите на вкладку **Inventory**
3. В поле **Tracking** выберите **By Unique Serial Number**
4. При приемке материалов на склад система будет требовать указания серийного номера

### 6.2. Отслеживание по партиям

Для материалов с ограниченным сроком годности:

1. В карточке продукта
2. В поле **Tracking** выберите **By Lots**
3. При приемке указывайте номер партии и срок годности

### 6.3. Без отслеживания

Для стандартных материалов (металл, крепеж):

1. В поле **Tracking** выберите **No Tracking**
2. Система будет учитывать только количество

---

## 7. Интеграция с производством (MRP)

### 7.1. Установка модуля Purchase MRP

Модуль `purchase_mrp` устанавливается автоматически при установке `purchase` и `mrp`.

### 7.2. Настройка автоматического создания заказов

При создании производственного заказа система:

1. Анализирует спецификацию (BOM)
2. Проверяет наличие материалов на складе
3. Создает предложения закупки для недостающих материалов
4. Снабженец подтверждает или корректирует предложения

### 7.3. Настройка на уровне продукта

Для каждого продукта в спецификации:

1. Убедитесь, что продукт имеет маршрут **Buy**
2. Настройте точку заказа, если требуется автоматическая закупка
3. Укажите поставщика по умолчанию

---

## 8. Настройка отчетности

### 8.1. Отчеты по закупкам

Доступные отчеты:
- **Purchase Analysis**: анализ закупок по периодам
- **Vendor Delay Report**: отчет о задержках поставок
- **Purchase Order Report**: отчет по заказам

### 8.2. Анализ поставщиков

1. Перейдите в **Purchase → Reporting → Purchase Analysis**
2. Используйте фильтры для анализа:
   - По поставщикам
   - По продуктам
   - По периодам
   - По статусам заказов

### 8.3. Настройка дашбордов

1. Перейдите в **Purchase → Dashboard**
2. Настройте виджеты для отображения:
   - Текущие заказы
   - Задержки поставок
   - Заказы на утверждение
   - Аналитика по поставщикам

---

## Дополнительные рекомендации

### 3-way matching

Для контроля соответствия заказа, поставки и счета:

1. В **Settings → Purchase → Invoicing**
2. Включите **3-way matching**
3. Система будет требовать подтверждения получения товара перед оплатой счета

### Варианты продуктов

Для материалов с различными характеристиками:

1. В **Settings → Purchase → Products**
2. Включите **Product Variants**
3. Настройте атрибуты продуктов (размер, цвет, материал и т.д.)

### Единицы измерения

Для закупки и продажи в разных единицах:

1. В **Settings → Purchase → Products**
2. Включите **Units of Measure**
3. Настройте единицы измерения для каждого продукта

### Баркоды

Для быстрого приема материалов:

1. Установите модуль **Barcode**
2. Настройте сканеры штрих-кодов
3. Используйте сканеры при приемке товаров на склад

---

## Поддержка

При возникновении проблем:

1. Проверьте логи Odoo: `./var/odoo.log`
2. Убедитесь, что все модули установлены
3. Проверьте права доступа пользователей
4. Обратитесь к документации Odoo: https://www.odoo.com/documentation

---

## Чек-лист настройки

- [ ] Проверены и установлены все необходимые модули
- [ ] Настроены базовые параметры закупок
- [ ] Активирован модуль Purchase Requisition
- [ ] Настроены точки заказа для критичных материалов
- [ ] Создана база поставщиков (10-50 компаний)
- [ ] Настроены прайс-листы поставщиков
- [ ] Настроено отслеживание для критичных материалов
- [ ] Настроена интеграция с MRP (если используется)
- [ ] Настроены отчеты и дашборды
- [ ] Настроены права доступа для пользователей
- [ ] Протестирована автоматизация на тестовых данных
- [ ] Проведено обучение пользователей
